<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @dojo.name %>
</p>

<p>
  <strong>Main image:</strong>
  <img src="<%= @dojo.main_image %>"/>
</p>

<p>
  <strong>Badge image:</strong>
  <img src="<%= @dojo.badge_image %>"/>
</p>

<p>
  <strong>About:</strong>
  <%= @dojo.about %>
</p>

<p>
  <strong>Motto:</strong>
  <%= @dojo.motto %>
</p>

<p>
  <strong>Schedule:</strong>
  <%= @dojo.schedule %>
</p>

<p>
  <strong>Public address:</strong>
  <%= @dojo.public_address %>
</p>

<p>
  <strong>Latitude:</strong>
  <%= @dojo.latitude %>
</p>

<p>
  <strong>Longitude:</strong>
  <%= @dojo.longitude %>
</p>

<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>


<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>


<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
    <% Dojo.all.each do |dojo| %>
      {
        "lat": <%= dojo.latitude %>,
        "lng": <%= dojo.longitude %>,
        "picture": {
          "url": "<%=dojo.badge_image%>",
          "width":  36,
          "height": 36
        },
        "infowindow": "<%=dojo.motto%> <a href='/dojos/<%=dojo.id%>'>Visit</a>"
      },
    <%end%>
    ]);
    handler.map.serviceObject.setCenter(new google.maps.LatLng(<%= @dojo.latitude %>, <%= @dojo.longitude %>));
  });
</script>

<%= link_to 'Edit', edit_dojo_path(@dojo) %> |
<%= link_to 'Back', dojos_path %>
